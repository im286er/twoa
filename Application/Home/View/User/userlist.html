<div class="page-header">
	<h1>
		用户信息
		<small>
			<i class="ace-icon fa fa-angle-double-right"></i>
			用户列表
		</small>
	</h1>
</div><!-- /.page-header -->

<div class="row">
	<div class="col-sm-12 dataTables_wrapper form-inline">
		<div class="row">
			<div class="col-sm-1">
				<div class="dataTables_length" id="dynamic-table_length">
					<div class="form-group">
						<div class="col-sm-1">
							<select name="dynamic-table_length" aria-controls="dynamic-table" class="form-control input-sm" id="show"><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option></select>
						</div>
					</div>
				</div>
			</div>
			<div class="col-xs-8">
				<div id="dynamic-table_filter" class="dataTables_filter">
					<form id="condition-form">
						<label>姓名:</label><input name="user_name" class="form-control input-sm" placeholder="" aria-controls="dynamic-table" type="search">
						<label>编码:</label><input name="user_code" class="form-control input-sm" placeholder="" aria-controls="dynamic-table" type="search">
						<label>公司:</label><input name="user_company" class="form-control input-sm" placeholder="" aria-controls="dynamic-table" type="search">
						<label>部门:</label><input name="user_group" class="form-control input-sm" placeholder="" aria-controls="dynamic-table" type="search">
						<label>分组:</label><input name="user_subgroup" class="form-control input-sm" placeholder="" aria-controls="dynamic-table" type="search">
						<label>性别:</label><input name="user_sex" class="form-control input-sm" placeholder="" aria-controls="dynamic-table" type="search">
					</form>
						
				</div>
			</div>
			<div class="col-xs-1">
				<button class="btn btn-sm btn-primary search-btn"><i class="ace-icon fa fa-search"></i>查询</button>
			</div>
		</div>
		<table id="user-table" class="table table-striped table-bordered table-hover center">
			<thead >
				<tr>
					<th class="center sorting_disabled" rowspan="1" colspan="1" aria-label="">
						<label class="pos-rel">
							<input class="ace" type="checkbox">
							<span class="lbl"></span>
						</label>
					</th>
					<th class="center">姓名</th>
					<th class="center">编码</th>
					<th class="center">公司</th>
					<th class="center">部门</th>
					<th class="center">分组</th>
					<th class="center">角色</th>
					<th class="center">性别</th>
					<th class="center">入职</th>
					<th class="center">生日</th>
					<th class="center">操作</th>
				</tr>
			</thead>
			<tbody id="ulist-t">
				<volist name="userlist" id="userinfo">
					<tr>
						<td>
							<label class="pos-rel">
								<input class="ace" type="checkbox">
								<span class="lbl"></span>
							</label>
						</td>
						<td>{$userinfo.user_name}</td>
						<td>{$userinfo.user_code}</td>
						<td>{$userinfo.user_company}</td>
						<td>{$userinfo.user_group}</td>
						<td>{$userinfo.user_subgroup}</td>
						<td>{$userinfo.user_role}</td>
						<td>{$userinfo.user_sex}</td>
						<td>{$userinfo.user_entry}</td>
						<td>{$userinfo.user_born}</td>
						<td>
							<div class="hidden-sm hidden-xs btn-group">
								<button class="btn btn-xs btn-info">
									<i class="ace-icon fa fa-pencil bigger-120"></i>
								</button>
								<button class="btn btn-xs btn-danger">
									<i class="ace-icon fa fa-trash-o bigger-120"></i>
								</button>
							</div>
						</td>
					</tr>
				</volist>
			</tbody>
		</table>
		<div id="page-div">{$page}</div>
	</div>
</div>

<!-- <script src="__PUBLIC__/components/datatables/media/js/jquery.dataTables.js"></script> -->
<!-- <script src="__PUBLIC__/components/_mod/datatables/jquery.dataTables.bootstrap.js"></script> -->
<!-- <script src="__PUBLIC__/components/datatables.net-buttons/js/dataTables.buttons.js"></script> -->
<!-- <script src="__PUBLIC__/components/datatables.net-buttons/js/buttons.flash.js"></script>
<script src="__PUBLIC__/components/datatables.net-buttons/js/buttons.html5.js"></script>
<script src="__PUBLIC__/components/datatables.net-buttons/js/buttons.print.js"></script>
<script src="__PUBLIC__/components/datatables.net-buttons/js/buttons.colVis.js"></script> -->
<!-- <script src="__PUBLIC__/components/datatables.net-select/js/dataTables.select.js"></script> -->

	<script>
	jQuery(function($){

		$(".dataTables_wrapper").on("click",".paginate_button",search_user)
		$(".search-btn").on("click",search_user)
	})
	function search_user(){
		datas={}
		datas["p"]=$(this).find("a").data("page")
		datas["condition"]=$("#condition-form").serializeArray()
		
		$.ajax({
			url:"{:U('search_user')}",
			type:"post",
			dataType:"json",
			data:datas,
			success:function(data){
				$("#ulist-t").html(data["userhtml"])
				$("#page-div").html(data["pagehtml"])
			}
		})	
	}
	</script>
